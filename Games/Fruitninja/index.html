<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>PixelNebula</title>
    <link rel="icon" href="../../Pictures/Logo.png" />

    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,minimal-ui=true,viewport-fit=cover"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="full-screen" content="yes"/>

    <meta name="screen-orientation" content="landscape"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="360-fullscreen" content="true"/>

    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

    <!-- libraries. -->
    <script src="azerion-libs.js" charset="utf-8"> </script>
    <script src="AzerionAdHandler.js" charset="utf-8"> </script>

    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="stylesheet" type="text/css" href="loader.css"/>
    <style>
      #screen-orientation {
        margin: 0 auto;
        height: 100vh;
        width: 100vw;
        display: none;
        position: absolute;
        top: 0px;
        left: 0px;
        background-color:#000000;
        background-image: url(./images/rotate-device.png);
        background-repeat: no-repeat;
        background-position: center;
        background-color: rgb(0, 0, 0);
        background-size: 50%;
        z-index: 999;
      }
    </style>
    <script src="orientation.js?v=11231" defer></script>
  </head>
  <body onload="checkLoginStatus()">
    <div id="GameDiv">
      <div id="Cocos3dGameContainer">
        <canvas id="GameCanvas"></canvas>
      </div>
    </div>
    <div id="loader">Loading ...</div>
    <div id="azerion-resize-check-game" style="position: absolute; top:5vh; right:5vw; z-index: 999;background-color: transparent;
font-size: 0px;height: 1px; width: 1px;color: white;">Placeholder</div>

    <div id="azerion-resize-check-engine" style="position: absolute; top:5vh; left:5vw; z-index: 999;background-color: transparent;
font-size: 0px;height: 1px; width: 1px;color: white;">Placeholder 2</div>

<!-- Polyfills bundle. -->
<script src="src/polyfills.bundle.js" charset="utf-8"> </script>

<!-- SystemJS support. -->
<script src="src/system.bundle.js" charset="utf-8"> </script>

<!-- Import map -->
<script src="src/import-map.json" type="systemjs-importmap" charset="utf-8"> </script>

<script>
    System.import('./index.js').catch(function(err) { console.error(err); })
</script>

    <div id="screen-orientation"></div>

  </body>
</html>



<script>
  function checkLoginStatus() {
const cookies = document.cookie.split(';').reduce((acc, cookie) => {
  const [key, value] = cookie.split('=').map(c => c.trim());
  acc[key] = value;
  return acc;
}, {});

const idToken = cookies.IDToken;

if (idToken) {
  fetch(`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${idToken}`)
      .then(response => response.json())
      .then(data => {})
      .catch(error => {
          console.error('Error validating token:', error);
          // Clear the cookie and redirect to index.html if token validation fails
          document.cookie = "IDToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
          window.location.href = '../../index.html';
      });
} else {
  // Redirect to index.html if no ID Token is found
  window.location.href = '../../index.html';
}
}
</script>